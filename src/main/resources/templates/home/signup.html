<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{shared/layout}">
<head>
<meta charset="UTF-8">
<title>íšŒì›ê°€ì…</title>
</head>
<body>

	<div layout:fragment="content" class="custom-container"
		style="text-align: center; padding: 40px 0;">
		<!-- ì œëª© -->
		<h1
			style="font-family: 'BagelFat', sans-serif; font-size: 60px; color: #CD853F; margin-bottom: 30px;">
			íšŒì›ê°€ì…</h1>

		<!-- ì…ë ¥ í¼ -->
		<form th:action="@{/users/signup}" method="post" th:object="${userSignupDTO}" enctype="multipart/form-data" style="max-width: 600px; margin: 0 auto;">

			<!-- ğŸ”¹ ê¸°ë³¸ ì •ë³´ -->
		      <input type="email" name="userEmail" class="login-input" placeholder="E-mail (ì•„ì´ë””)" required>
		      <input type="password" name="userPassword" class="login-input" placeholder="ë¹„ë°€ë²ˆí˜¸" required>
		      <input type="password" name="passwordConfirm" class="login-input" placeholder="ë¹„ë°€ë²ˆí˜¸ í™•ì¸" required>
		      <input type="text" name="userName" class="login-input" placeholder="ì´ë¦„" required>
		      <input type="text" name="nickname" class="login-input" placeholder="ë‹‰ë„¤ì„" required>
		      <input type="text" name="phoneNumber" class="login-input" placeholder="íœ´ëŒ€í° ë²ˆí˜¸" required>

			<!-- ğŸ”¹ ì£¼ì†Œ ì •ë³´ -->
		     <div class="address-group">
				 <input type="text" id="zipCode" name="zipCode" class="login-input" placeholder="ìš°í¸ë²ˆí˜¸" readonly>
				 <button type="button" onclick="execDaumPostcode()" class="btn-fatcat">ì£¼ì†Œ ê²€ìƒ‰</button>
			  </div>
		      <input type="text" id="address1" name="address1" class="login-input" placeholder="ê¸°ë³¸ ì£¼ì†Œ" readonly>
		      <input type="text" id="address2" name="address2" class="login-input" placeholder="ìƒì„¸ ì£¼ì†Œ ì…ë ¥">
		
		      <!-- ìœ„ë„/ê²½ë„ (hidden) -->
		      <input type="hidden" id="latitude" name="latitude">
		      <input type="hidden" id="longitude" name="longitude">
			
			<!-- ğŸ”¹ ì¶”ê°€ ì •ë³´ -->
		      <!-- í”„ë¡œí•„ ì´ë¯¸ì§€ -->
			<div class="file-input-row">
			  <label for="profileImage">í”„ë¡œí•„ ì´ë¯¸ì§€ (ì„ íƒ)</label>
			  <div class="file-input-wrapper">
			    <label for="profileImage" class="custom-file-label">íŒŒì¼ ì„ íƒ</label>
			    <span id="fileName" class="file-name">ì„ íƒëœ íŒŒì¼ ì—†ìŒ</span>
			    <div id="profileThumb" class="profile-thumb"></div>
			    <input type="file" id="profileImage" name="profileImageFile" accept="image/*" onchange="previewInline(this)">
			  </div>
			</div>


		      <!-- ìˆ˜ì˜ì‚¬ ë©´í—ˆ ì´ë¯¸ì§€ -->
			<div class="file-input-row">
			  <label for="vetLicenseImage">ìˆ˜ì˜ì‚¬ ë©´í—ˆ ì´ë¯¸ì§€ (ì„ íƒ)</label>
			  <div class="file-input-wrapper">
			    <label for="vetLicenseImage" class="custom-file-label">íŒŒì¼ ì„ íƒ</label>
			    <span id="vetFileName" class="file-name">ì„ íƒëœ íŒŒì¼ ì—†ìŒ</span>
			    <input type="file" id="vetLicenseImage" name="vetLicenseImageFile" accept="image/*" onchange="showFileName(this, 'vetFileName')">
			  </div>
			</div>


			<!-- ê°€ì… ë²„íŠ¼ -->
			<button type="submit" class="login-btn mt-4">ê°€ì…í•˜ê¸°</button>

		</form>
		
<script src="https://t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<!-- ì¹´ì¹´ì˜¤ ì§€ë„ API (ì¢Œí‘œ ë³€í™˜ìš©) -->
<script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=94d1c331dbd40471d2fb9d113ba5d78b&libraries=services"></script>
<script>


function execDaumPostcode() {
	console.log("execDaumPostcode ì‹¤í–‰ë¨ âœ…");
	  new daum.Postcode({

	    oncomplete: function(data) {
	    	
	    	console.log("oncomplete ì‹¤í–‰ë¨ âœ…", data);
	      // âœ… ê¸°ë³¸ì£¼ì†Œ & ìš°í¸ë²ˆí˜¸ ì±„ìš°ê¸°
	      document.getElementById('address1').value = data.roadAddress;
	      document.getElementById('zipCode').value = data.zonecode;
	      
	      console.log("ë„ë¡œëª…ì£¼ì†Œ:", data.roadAddress);

	      try {
	        // âœ… ì¢Œí‘œ ë³€í™˜ (ì—ëŸ¬ ë‚˜ë„ íŒì—…ì€ ë‹«íˆê²Œ)
	        var geocoder = new kakao.maps.services.Geocoder();
	        geocoder.addressSearch(data.roadAddress, function(result, status) {
	        	console.log("status:", status, "result:", result);
	          if (status === kakao.maps.services.Status.OK) {
	        	  console.log("ë³€í™˜ ì„±ê³µ:", result[0]);
	            document.getElementById('latitude').value = result[0].y;
	            document.getElementById('longitude').value = result[0].x;
	          }
	        });
	      } catch (e) {
	        console.error("Geocoder ì—ëŸ¬:", e);
	      }
	    } 
	  }).open(); // ğŸ‘‰ íŒì—…ìœ¼ë¡œ ì—´ê¸°
	}
	
function previewInline(input) {
	  const fileName = document.getElementById('fileName');
	  const thumb = document.getElementById('profileThumb');
	  thumb.innerHTML = "";

	  if (input.files && input.files[0]) {
	    fileName.textContent = input.files[0].name; // íŒŒì¼ëª… í‘œì‹œ
	    const reader = new FileReader();
	    reader.onload = function(e) {
	      const img = document.createElement("img");
	      img.src = e.target.result;
	      thumb.appendChild(img);
	      thumb.style.display = "block";
	    };
	    reader.readAsDataURL(input.files[0]);
	  } else {
	    fileName.textContent = "ì„ íƒëœ íŒŒì¼ ì—†ìŒ";
	    thumb.style.display = "none";
	  }
	}
	
function showFileName(input, targetId) {
	  const fileName = document.getElementById(targetId);

	  if (input.files && input.files[0]) {
	    fileName.textContent = input.files[0].name; // íŒŒì¼ëª… í‘œì‹œ
	  } else {
	    fileName.textContent = "ì„ íƒëœ íŒŒì¼ ì—†ìŒ";
	  }
	}

</script>


		
	</div>
	
	
</body>


</html>